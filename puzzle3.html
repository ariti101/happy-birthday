<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Puzzle 1</title>
  <style>
    body {
      background-color: #f0f8ff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 40px 20px;
      margin: 0;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 20px;
    }

    #puzzle-container {
      position: relative;
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 4px;
      margin-top: 10px;
    }

    .tile {
      width: 100px;
      height: 100px;
      background-size: 300px 300px;
      background-image: url("puzzle3.jpg");
      border: 2px solid #ccc;
      cursor: grab;
      transition: transform 0.1s;
    }

    #win-message {
      display: none;
      font-size: 24px;
      color: green;
      margin-top: 20px;
    }

    #back-button {
  margin: 30px auto;
  padding: 10px 20px;
  background-color:#5d4371;
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  cursor: pointer;
  display: block;
  text-align: center;
  text-decoration: none;
  width: max-content;
}

#back-button:hover {
  background-color: #973e46;
}


    #full-image {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 308px;
      height: 308px;
      z-index: 5;
      border: 4px solid #444;
    }
  </style>
</head>
<body>

  <h1>ðŸ§© Puzzle Game</h1>

  <div id="puzzle-container">
    <img id="full-image" src="puzzle3.jpg" alt="Completed Puzzle" />
  </div>

  <div id="win-message">ðŸŽ‰ You Win!</div>

<button id="back-button" onclick="window.location.href='index.html#bored'">Back</button>



  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

  <script>
    const container = document.getElementById("puzzle-container");
    const winMessage = document.getElementById("win-message");
    const fullImage = document.getElementById("full-image");

    let tiles = [];
    let draggedIndex = null;

    function createTiles() {
      tiles = [];
      for (let i = 0; i < 9; i++) {
        const tile = document.createElement("div");
        tile.className = "tile";
        tile.dataset.correct = i;
        tile.style.backgroundPosition = `${-(i % 3) * 100}px ${-Math.floor(i / 3) * 100}px`;
        tile.setAttribute("draggable", true);

        tile.addEventListener("dragstart", (e) => {
          draggedIndex = tiles.indexOf(tile);
        });

        tile.addEventListener("dragover", (e) => {
          e.preventDefault();
        });

        tile.addEventListener("drop", (e) => {
          const droppedIndex = tiles.indexOf(tile);
          swapTiles(draggedIndex, droppedIndex);
          if (isSolved()) {
            winMessage.style.display = "block";
            fullImage.style.display = "block";
            confetti({ particleCount: 150, spread: 100, origin: { y: 0.6 } });
          }
        });

        tiles.push(tile);
      }

      shuffleTiles();
      renderTiles();
    }

    function shuffleTiles() {
      do {
        tiles.sort(() => Math.random() - 0.5);
      } while (!isSolvable() || isSolved());
    }

    function renderTiles() {
      container.innerHTML = '';
      tiles.forEach(tile => container.appendChild(tile));
    }

    function swapTiles(i, j) {
      [tiles[i], tiles[j]] = [tiles[j], tiles[i]];
      renderTiles();
    }

    function isSolved() {
      return tiles.every((tile, i) => tile.dataset.correct == i);
    }

    function isSolvable() {
      const positions = tiles.map(tile => tile.dataset.correct);
      const invCount = positions.reduce((inv, val, i) => {
        for (let j = i + 1; j < 9; j++) {
          if (positions[j] < val) inv++;
        }
        return inv;
      }, 0);
      return invCount % 2 === 0;
    }

    window.onload = createTiles;
  </script>

</body>
</html>
